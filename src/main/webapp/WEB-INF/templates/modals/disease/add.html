<!DOCTYPE html>
<html>
<head>
</head>
<body>
<div th:fragment="modal" class="modal fade" id="modalAddDisease">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h4 th:text="#{AddDisease}" class="modal-title"></h4>
			</div>
			<div class="modal-body">
				<form action="#" th:action="@{diseases/add}" th:object="${disease}" method="post">
					<div class="form-group">
						<label th:text="#{Disease}" th:for="*{name}" />
						<input th:field="*{name}" th:placeholder="#{LabelPutName}" type="text" autocomplete="off" class="form-control"/>
					</div>
					<div class="form-group">
						<label th:text="#{DateStart}"/>
						<div class="input-group">
	   						<label for="diseaseStart" class="input-group-addon btn "><span class="glyphicon glyphicon-calendar"></span></label>
	   						<input id="diseaseStart" th:placeholder="#{ClickCalendar}" autocomplete="off" class="datepicker form-control"/>	
						</div>
					</div>
					<div class="form-group">
						<label th:text="#{DescriptionDisease}" th:for="*{description}" />
						<textarea th:field="*{description}" th:placeholder="#{DescriptionDisease}" rows="5" cols="30" type="text" autocomplete="off" class="form-control"/>
					</div>
					<input hidden th:field="*{startLong}"/>
					<div style="margin-top: 15px;" class="alert alert-danger" id="errorForm" hidden></div>
           		</form:form>
            </div>
            <div class="modal-footer">
				<span id="loadingArchive" hidden>
					<span th:text="#{working}"></span>
					<img th:src="@{/resources/jpg/loading.gif}">
				</span>
				<button th:text="#{Save}" type="submit" Class="btn btn-danger"/>
				<button th:text="#{Cancel}" type="button" class="btn btn-default" data-dismiss="modal"/>
       		</div>
        </div>
    </div>
    <script type="text/javascript" th:inline="javascript">
		$(function() {
			$('.datepicker').datepicker({
				format: "yyyy-mm-dd",
				language: "pl",
				autoclose: true
			});
		});
	    $('form').on('submit', function(e){
	    	var dateStart = $('#diseaseStart').val();
	    	var dateStartLong = convertDateFromYYYYMMSStoLong(dateStart)
	    	$('input[id="startLong"]').val(dateStartLong);
	    	validate(e);
			$('#loadingAdd').prop('hidden', false);
		});
	    function validate(e) {
	    	if($('input[id="name"]').val() == "" || $('input[id="startLong"]').val() == 0) {
	    		var error = [[#{ErrorAddDisease}]];
				$('#errorForm').html(error).show().delay(3000).fadeOut();
				e.preventDefault();
	    	}
	    		
	    }
    </script>
</div>
</body>
</html>