<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<div th:fragment="modal" class="modal fade" id="modalSearchMedicament">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h4 th:text="#{ChooseMedicament}" class="modal-title"></h4>
			</div>
			<div class="modal-body">
				<table id="tableSearch"class="table table-striped">
				
				</table>
			</div>
			<div class="modal-footer">

			</div>
		</div>
	</div>
	<script type="text/javascript">
	function getMedicaments(){
		$.ajax({
			url: '/api/medicaments/search',
			data:{search:search},
			type: 'GET',
			beforeSend: function(xhr) {
				xhr.setRequestHeader("Accept", "application/json");
				xhr.setRequestHeader("Content-Type", "application/json");
			},
			success: function(data){

			},
			error: function(xhr) {
				console.log('error');
			}
		});
		$.ajax({
			url: 'database.json',
			dataType: 'json',
			data:{search:search},
			success: function(data){
				$('#table').append("<tr class=\"table-row-header\"><th>Nazwa</th><th>Producent</th><th>Opakowanie</th><th>Cena</th></tr>");
				$.each(data, function(index, element){
					$('#table').append("<tr class=\"tableRow\">" + 
							"<td class=\"medicament-list-name\">" + element.productName + "</td>" + 
							"<td class=\"medicament-list-packageID\" hidden=\"true\">" + element.packageID + "</td>" + 
							"<td class=\"medicament-list-quantity\" hidden=\"true\">" + element.dosageObject.wholePackage + "</td>" + 
							"<td class=\"medicament-list-unit\" hidden=\"true\">" + element.dosageObject.unit + "</td>" + 
							"<td class=\"medicament-list-producent\">" + element.producer + "</td>" + 
							"<td class=\"medicament-list-kind\">" + element.pack + "</td>" + 
							"<td class=\"medicament-list-price\">" + element.price + "</td>" + 
							"</tr>");
				});
			if(data == '') {
				$('#erronNoFoundMedicament').attr('hidden',false).addClass('help-block');
				$('#idMedicamentSearchFormGroup').addClass('has-error');
				
			}
			else {
	  				$('#table').show();
	  	  	 		$('#modalSearchMedicament').modal('show');
			}
			$('#loadingSearch').prop('hidden', true);
			},
			error: function(xhr) {
				console.log('error')
			}
		});
	}
	</script>
</div>
</body>
</html>